<!-- 
Angry Blocks Attack : React Based
----------------------------------
License : Apache 2.0 License
Author  : Md Mahbubur Rahman
URL     : https://m-a-h-b-u-b.github.io
GitHub  : https://github.com/m-a-h-b-u-b/angry-blocks-attack
-->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Angry Blocks Attack</title>
<style>
  body { display:flex; flex-direction:column; justify-content:center; align-items:center; height:100vh; background:#f7f7f7; font-family:sans-serif; margin:0; }
  #game { position:relative; width:800px; height:300px; border:2px solid black; overflow:hidden; background:#fff; }
  #dino { position:absolute; left:50px; bottom:0; width:50px; height:50px; }
  #dino .head { width:30px; height:30px; background:yellow; border-radius:50%; position:absolute; top:0; left:10px; border:2px solid black; }
  #dino .body { width:20px; height:30px; background:orange; position:absolute; bottom:0; left:15px; border:2px solid black; }
  #dino .hand-left, #dino .hand-right { width:10px; height:20px; background:blue; position:absolute; top:10px; border:2px solid black; }
  #dino .hand-left { left:-10px; transform:rotate(20deg); } 
  #dino .hand-right { right:-10px; transform:rotate(-20deg); }
  #dino .leg-left, #dino .leg-right { width:10px; height:20px; background:green; position:absolute; bottom:-20px; border:2px solid black; }
  #dino .leg-left { left:5px; transform:rotate(-10deg); } 
  #dino .leg-right { right:5px; transform:rotate(10deg); }

  .obstacle-group { position:absolute; bottom:0; display:flex; gap:5px; }
  .obstacle { width:50px; height:50px; position:relative; }
  .obstacle .head { width:30px; height:30px; background:red; border-radius:50%; position:absolute; top:0; left:10px; border:2px solid black; }
  .obstacle .body { width:20px; height:30px; background:darkred; position:absolute; bottom:0; left:15px; border:2px solid black; }
  .obstacle .hand-left, .obstacle .hand-right { width:10px; height:20px; background:darkred; position:absolute; top:10px; border:1px solid black; }
  .obstacle .hand-left { left:-10px; transform:rotate(20deg); } 
  .obstacle .hand-right { right:-10px; transform:rotate(-20deg); }
  .obstacle .leg-left, .obstacle .leg-right { width:10px; height:20px; background:maroon; position:absolute; bottom:-20px; border:1px solid black; }
  .obstacle .leg-left { left:5px; transform:rotate(-10deg); } 
  .obstacle .leg-right { right:5px; transform:rotate(10deg); }
  .obstacle .head::before, .obstacle .head::after { content:''; position:absolute; width:4px; height:4px; background:black; top:8px; border-radius:50%; }
  .obstacle .head::before { left:6px; } .obstacle .head::after { right:6px; }

  #score { position:absolute; top:10px; right:10px; font-weight:bold; font-size:18px; }
  #gameOver { position:absolute; width:100%; height:100%; background:rgba(0,0,0,0.6); color:white; font-size:36px; display:flex; justify-content:center; align-items:center; flex-direction:column; display:none; }
  #gameOver span { font-size:18px; margin-top:10px; }

  #footer { margin-top:20px; text-align:center; font-size:14px; color:#333; }
  #footer a { color:#0077cc; text-decoration:none; }
  #footer a:hover { text-decoration:underline; }
</style>
</head>
<body>
<div id="game">
  <div id="dino">
    <div class="head"></div>
    <div class="body"></div>
    <div class="hand-left"></div>
    <div class="hand-right"></div>
    <div class="leg-left"></div>
    <div class="leg-right"></div>
  </div>
  <div id="score">Score: 0</div>
  <div id="gameOver">Game Over!<span>Press any key to restart</span></div>
</div>

<div id="footer">
  Press Space bar to jump. Game Developed by Md Mahbubur Rahman 
  <a href="https://m-a-h-b-u-b.github.io" target="_blank">https://m-a-h-b-u-b.github.io</a>
</div>

<script>
const game = document.getElementById('game');
const dino = document.getElementById('dino');
const scoreDisplay = document.getElementById('score');
const gameOverDisplay = document.getElementById('gameOver');

let dinoBottom = 0;
let isJumping = false;
let obstacles = [];
let obstacleIntervals = [];
let score = 0;
let gameActive = true;
let obstacleSpeed = 15;

function jump() {
  if (isJumping || !gameActive) return;
  isJumping = true;
  const maxHeight = 220;
  let upInterval = setInterval(() => {
    if (dinoBottom >= maxHeight) {
      clearInterval(upInterval);
      let downInterval = setInterval(() => {
        if (dinoBottom <= 0) {
          clearInterval(downInterval);
          isJumping = false;
          dinoBottom = 0;
        } else {
          dinoBottom -= 10;
          dino.style.bottom = dinoBottom + 'px';
        }
      },20);
    } else {
      dinoBottom += 10;
      dino.style.bottom = dinoBottom + 'px';
    }
    dino.style.bottom = dinoBottom + 'px';
  },20);
}

function createObstacleGroup() {
  if (!gameActive) return;

  // Maximum 3 obstacles per group
  const MAX_OBSTACLES = 3;
  const groupSize = Math.floor(Math.random() * MAX_OBSTACLES) + 1; // 1 to 3 obstacles

  const group = document.createElement('div');
  group.classList.add('obstacle-group');
  group.style.left = '800px';

  for (let i = 0; i < groupSize; i++) {
    const obs = document.createElement('div');
    obs.classList.add('obstacle');
    obs.innerHTML = `
      <div class="head"></div>
      <div class="body"></div>
      <div class="hand-left"></div>
      <div class="hand-right"></div>
      <div class="leg-left"></div>
      <div class="leg-right"></div>
    `;
    group.appendChild(obs);
  }

  game.appendChild(group);
  obstacles.push(group);

  let obstacleLeft = 800;
  const interval = setInterval(() => {
    if (!gameActive) { clearInterval(interval); return; }
    if (obstacleLeft <= -50*groupSize){
      clearInterval(interval);
      if(group.parentNode) game.removeChild(group);
      obstacles.shift();
      obstacleIntervals.shift();
    } else {
      obstacleLeft -= obstacleSpeed;
      group.style.left = obstacleLeft+'px';
      if(obstacleLeft<100 && obstacleLeft+50*groupSize>50 && dinoBottom<50) gameOver();
    }
  },50);
  obstacleIntervals.push(interval);
}

// Randomized obstacle interval (1s ~ 3s)
function scheduleNextObstacle(){
  if(!gameActive) return;
  const delay = Math.random()*2000 + 1000;
  setTimeout(()=>{
    createObstacleGroup();
    scheduleNextObstacle();
  }, delay);
}

function gameOver() {
  gameActive = false;
  gameOverDisplay.style.display='flex';
  obstacleIntervals.forEach(i=>clearInterval(i));
  obstacleIntervals=[];
}

function resetGame(){
  obstacles.forEach(o=>{ if(o.parentNode) game.removeChild(o); });
  obstacles=[];
  obstacleIntervals=[];
  score=0;
  obstacleSpeed=15;
  scoreDisplay.textContent='Score: 0';
  dinoBottom=0;
  dino.style.bottom='0px';
  gameActive=true;
  gameOverDisplay.style.display='none';
  scheduleNextObstacle();
}

document.addEventListener('keydown', e=>{
  if(!gameActive){ resetGame(); return; }
  if(e.code==='Space') jump();
});

scheduleNextObstacle();

// Score and speed increase
setInterval(()=>{
  if(gameActive){
    score++;
    scoreDisplay.textContent='Score: '+score;
    if(score%50===0) obstacleSpeed+=2;
  }
},200);
</script>
</body>
</html>
